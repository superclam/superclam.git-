image: gitpod/workspace-android

tasks:
  - name: Setup Android Environment
    init: |
      # è®¾ç½®Android SDKç¯å¢ƒå˜é‡
      export ANDROID_HOME=/opt/android-sdk-linux
      export PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools
      
      # åˆ›å»ºlocal.propertiesæ–‡ä»¶
      echo "sdk.dir=$ANDROID_HOME" > local.properties
      
      # è®¾ç½®gradlewæƒé™
      chmod +x gradlew
      
      # æ¸…ç†é¡¹ç›®
      ./gradlew clean
      
    command: |
      echo "ğŸš€ Androidå¼€å‘ç¯å¢ƒå·²å‡†å¤‡å°±ç»ªï¼"
      echo "ğŸ“± è¿è¡Œä»¥ä¸‹å‘½ä»¤æ„å»ºAPKï¼š"
      echo "   ./gradlew assembleDebug"
      echo "   ./gradlew assembleRelease"
      echo ""
      echo "ğŸ“ APKæ–‡ä»¶å°†ç”Ÿæˆåœ¨ï¼š"
      echo "   app/build/outputs/apk/debug/app-debug.apk"
      echo "   app/build/outputs/apk/release/app-release-unsigned.apk"

ports:
  - port: 8080
    onOpen: ignore

vscode:
  extensions:
    - vscjava.vscode-java-pack
    - redhat.java
    - vscjava.vscode-gradle
