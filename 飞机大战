<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>飞机大战</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: black;
        }

        #game-container {
            position: relative;
            width: 800px;
            height: 600px;
            margin: 50px auto;
            border: 1px solid white;
            background-image: url('https://picsum.photos/800/600');
            background-size: cover;
        }

        #player {
            position: absolute;
            width: 50px;
            height: 50px;
            bottom: 20px;
            left: 375px;
            background-color: blue;
        }

        .enemy {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: red;
        }

        .bullet {
            position: absolute;
            width: 5px;
            height: 10px;
            background-color: yellow;
        }
    </style>
</head>

<body>
    <div id="game-container">
        <div id="player"></div>
    </div>
    <script>
        const gameContainer = document.getElementById('game-container');
        const player = document.getElementById('player');
        let playerX = 375;
        let bullets = [];
        let enemies = [];
        let score = 0;

        function movePlayer(event) {
            switch (event.key) {
                case 'ArrowLeft':
                    if (playerX > 0) {
                        playerX -= 10;
                    }
                    break;
                case 'ArrowRight':
                    if (playerX < 750) {
                        playerX += 10;
                    }
                    break;
                case ' ':
                    shootBullet();
                    break;
            }
            player.style.left = playerX + 'px';
        }

        function shootBullet() {
            const bullet = document.createElement('div');
            bullet.classList.add('bullet');
            bullet.style.left = playerX + 22 + 'px';
            bullet.style.bottom = '70px';
            gameContainer.appendChild(bullet);
            bullets.push(bullet);
        }

        function createEnemy() {
            const enemy = document.createElement('div');
            enemy.classList.add('enemy');
            const enemyX = Math.random() * 750;
            enemy.style.left = enemyX + 'px';
            enemy.style.top = '0px';
            gameContainer.appendChild(enemy);
            enemies.push(enemy);
        }

        function moveBullets() {
            for (let i = 0; i < bullets.length; i++) {
                const bullet = bullets[i];
                let bulletY = parseInt(bullet.style.bottom);
                bulletY += 10;
                bullet.style.bottom = bulletY + 'px';
                if (bulletY > 600) {
                    gameContainer.removeChild(bullet);
                    bullets.splice(i, 1);
                    i--;
                }
            }
        }

        function moveEnemies() {
            for (let i = 0; i < enemies.length; i++) {
                const enemy = enemies[i];
                let enemyY = parseInt(enemy.style.top);
                enemyY += 5;
                enemy.style.top = enemyY + 'px';
                if (enemyY > 600) {
                    gameContainer.removeChild(enemy);
                    enemies.splice(i, 1);
                    i--;
                }
            }
        }

        function checkCollisions() {
            for (let i = 0; i < bullets.length; i++) {
                const bullet = bullets[i];
                for (let j = 0; j < enemies.length; j++) {
                    const enemy = enemies[j];
                    const bulletRect = bullet.getBoundingClientRect();
                    const enemyRect = enemy.getBoundingClientRect();
                    if (
                        bulletRect.left < enemyRect.right &&
                        bulletRect.right > enemyRect.left &&
                        bulletRect.top < enemyRect.bottom &&
                        bulletRect.bottom > enemyRect.top
                    ) {
                        gameContainer.removeChild(bullet);
                        gameContainer.removeChild(enemy);
                        bullets.splice(i, 1);
                        enemies.splice(j, 1);
                        i--;
                        j--;
                        score++;
                        console.log('Score: ', score);
                    }
                }
            }
        }

        document.addEventListener('keydown', movePlayer);

        setInterval(createEnemy, 2000);
        setInterval(moveBullets, 50);
        setInterval(moveEnemies, 100);
        setInterval(checkCollisions, 50);
    </script>
</body>

</html>
    
